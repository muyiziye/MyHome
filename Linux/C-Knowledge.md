## c语言实际编码常用技巧

***

  * 1 #ifdef和#if define()的区别，在进行单个的宏判断时，两者没有区别，但是如果需要加入复杂的逻辑需要使用后者，（ag,#if define(XXX) || a>b）

  * 2 多层宏嵌套，在输入#ifdef等的时候会自动的到顶格开始，建议根据嵌套层次来进行适当的缩进，来增加代码的可读性

  * 3 gcc分部编译，test.c为例，gcc -E test.c -o test.i;gcc -S test.i -o test.s;gcc -C test.s -o test;

  * 4 关于宏中间的#的说明，#的功能是将其后面的宏参数进行字符串化操作，##用来将多个Token连接为一个Token，在进行宏展开的时候，如果宏表示符前面有#，那么在宏展开的时候就不要向下展开了，否则就先将里面的参数展开来。

    > \#define f(a,b) a##b

    > \#define g(a) #a

    > \#define h(a) g(a)

    > 给出下面预处理后的结果

    > g(a),g(g(a)),h(f(1,2)),g(f(1,2)),g(h(f(1,2))),h(g(f(1,2))),h(h(f(1,2))),

    >答案："a"，"g(a)","12","f(1,2)","h(f(1,2))","f(1,2)","12"

 * 5 需要注意的是，在有#和##的宏中，如果参数本身是宏，那么宏将不会被展开，加上一层中间转换宏即可解决这个问题。

 * 6 判断是c程序还是c++的程序可以使用如下宏来控制#ifdef __cplusplus来判断，因为__cplusplus是c++库中定义的宏，通过这个可以普安断是否是c++程序。

 * 7 在c++中调用c的库函数可以使用如下方式

     #ifdef __cplusplus

     extern   "C"

     {

     相关的库函数

     }

 * 8 在使用宏的时候要使用do{}while(0),这样的话可以将宏的内容变成一个整体，防止类似if和esle这种语句将宏所表达的内容分开。

 * 9 assert的使用，需要加头文件#include<assert.h>,如果需要禁用assert可以在头文件前面加上#define NDEBUG，这样以来断言就不会产生效果了。

 * 10 
    